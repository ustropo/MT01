* RX FAMILY ASSEMBLER V2.03.00.01 [24 Oct 2014] *  SOURCE LIST  Thu Mar 09 14:19:12 2017

LOC.     OBJ.              0XMDA SOURCE STATEMENT

                                 ;RX Family C/C++ Compiler (V2.03.00.03 [04 Dec 2014])  09-Mar-2017 14:19:12
                                 
                                 ;*** CPU TYPE ***
                                 
                                 ;-ISA=RXV1
                                 
                                 ;*** COMMAND PARAMETER ***
                                 
                                 ;-output=src=r_fl_downloader.src
                                 ;-lang=c99
                                 ;-include=C:\PROGRA~2\Renesas\RX\2_3_0/include,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx,C:\Workspace\e2studio\git\MT01_master\r_lvd_rx\src,C:/Workspace/e2studio/
                                 ;-debug
                                 ;-show=source,conditionals,definitions,expansions
                                 ;-listfile=r_fl_downloader.lst
                                 ;-isa=rxv1
                                 ;-optimize=0
                                 ;-fpu
                                 ;-alias=noansi
                                 ;-nologo
                                 ;-nomessage
                                 ;-define=__RX,COMPACTAXP=1,EASYMAK=0,MOBILE=0,FREE_RTOS_PP
                                 ;r_fl_downloader.c
                                 
                                 		.glb	_qKeyboard
                                 		.glb	_u8g_font_6x10
                                 		.glb	_proj_name
                                 		.glb	_proj_programmed
                                 		.glb	_drivemountFlag
                                 		.glb	_media
                                 		.glb	_file
                                 		.glb	_g_app_header
                                 		.glb	_g_fl_tx_buffer
                                 		.glb	_g_fl_rx_buffer
                                 		.glb	_g_fl_load_image_headers
                                 		.glb	_StrBoot
                                 		.glb	_g_pfl_cur_app_header
                                 		.glb	_address
                                 		.glb	_chargeIndex
                                 		.glb	_R_FL_DownloaderInit
                                 		.glb	_fl_mem_init
                                 		.glb	_R_CRC_Init
                                 		.glb	_R_FL_StateMachine
                                 		.glb	_f_open
                                 		.glb	_f_lseek
                                 		.glb	_f_read
                                 		.glb	_sprintf
                                 		.glb	_ut_lcd_drawStr
                                 		.glb	_ut_lcd_output_str
                                 		.glb	_xQueueGenericReceive
                                 		.glb	_fl_mem_erase
                                 		.glb	_ut_lcd_output_warning
                                 		.glb	_fl_mem_write
                                 		.glb	_memcmp
                                 		.glb	_f_close
                                 		.glb	_f_rename
                                 		.glb	_R_BSP_RegisterProtectDisable
                                 ;LineNo. C-SOURCE STATEMENT
                                 
                                 		.SECTION	P,CODE
00000000                         _R_FL_DownloaderInit:
                                 		.STACK	_R_FL_DownloaderInit=4
                                 ;       1 /*******************************************************************************
                                 ;       2 * DISCLAIMER
                                 ;       3 * This software is supplied by Renesas Electronics Corporation and is only 
                                 ;       4 * intended for use with Renesas products. No other uses are authorized. This 
                                 ;       5 * software is owned by Renesas Electronics Corporation and is protected under
                                 ;       6 * all applicable laws, including copyright laws.
                                 ;       7 * THIS SOFTWARE IS PROVIDED "AS IS" AND RENESAS MAKES NO WARRANTIES REGARDING
                                 ;       8 * THIS SOFTWARE, WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING BUT NOT
                                 ;       9 * LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE 
                                 ;      10 * AND NON-INFRINGEMENT. ALL SUCH WARRANTIES ARE EXPRESSLY DISCLAIMED.
                                 ;      11 * TO THE MAXIMUM EXTENT PERMITTED NOT PROHIBITED BY LAW, NEITHER RENESAS 
                                 ;      12 * ELECTRONICS CORPORATION NOR ANY OF ITS AFFILIATED COMPANIES SHALL BE LIABLE 
                                 ;      13 * FOR ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES FOR
                                 ;      14 * ANY REASON RELATED TO THIS SOFTWARE, EVEN IF RENESAS OR ITS AFFILIATES HAVE
                                 ;      15 * BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
                                 ;      16 * Renesas reserves the right, without notice, to make changes to this software
                                 ;      17 * and to discontinue the availability of this software. By using this software,
                                 ;      18 * you agree to the additional terms and conditions found by accessing the 
                                 ;      19 * following link:
                                 ;      20 * http://www.renesas.com/disclaimer *
                                 ;      21 * Copyright (C) 2013 Renesas Electronics Corporation. All rights reserved.    
                                 ;      22 *******************************************************************************/
                                 ;      23 /*******************************************************************************
                                 ;      24 * File Name    : r_fl_downloader.c
                                 ;      25 * Version      : 3.00
                                 ;      26 * Description  : Contains the FlashLoader state machine.  This file should
                                 ;      27 *                not be changed unless you are changing part of the protocol.
                                 ;      28 ******************************************************************************/  
                                 ;      29 /******************************************************************************
                                 ;      30 * History : DD.MM.YYYY Version Description
                                 ;      31 *         : 05.04.2010 1.00    First Release
                                 ;      32 *         : 22.03.2011 2.00    First Release for YRDK
                                 ;      33 *         : 02.03.2012 3.00    Made compliant with CS v4.0. State machine is
                                 ;      34 *                              now triggered by user supplied timer. Uses
                                 ;      35 *                              r_crc_rx package.
                                 ;      36 ******************************************************************************/
                                 ;      37 
                                 ;      38 /******************************************************************************
                                 ;      39 Includes   <System Includes> , "Project Includes"
                                 ;      40 ******************************************************************************/
                                 ;      41 /* Functions prototypes for dealing with strings (used for memcpy) */
                                 ;      42 #include <string.h>
                                 ;      43 /* Included for definitions for 'true' and 'false' */
                                 ;      44 #include <stdbool.h>
                                 ;      45 /* Flash Loader project includes. */
                                 ;      46 #include "r_fl_includes.h"
                                 ;      47 /* Uses r_crc_rx package for CRC calculations. */
                                 ;      48 #include "r_crc_rx_if.h"
                                 ;      49 /* Used for re-entrancy protection with state machine. */
                                 ;      50 #include "platform.h"
                                 ;      51 #include "keyboard.h"
                                 ;      52 #include "plasma.h"
                                 ;      53 
                                 ;      54 #include "ff.h"
                                 ;      55 
                                 ;      56 #include "lcd.h"
                                 ;      57 #include "lcd_menu.h"
                                 ;      58 
                                 ;      59 #include <string.h>
                                 ;      60 #include <stdio.h>
                                 ;      61 
                                 ;      62 const char proj_name[] = "MT01_proj.bin";
                                 ;      63 const char proj_programmed[] = "MT01_done.bin";
                                 ;      64 
                                 ;      65 #define CRC_ADDRESS (((uint32_t)__sectop("APPHEADER_1"))-0xFFF00000)
                                 ;      66 extern bool drivemountFlag;
                                 ;      67 FATFS media;
                                 ;      68 FIL file;
                                 ;      69 const fl_image_header_t *g_app_header;
                                 ;      70 
                                 ;      71 /******************************************************************************
                                 ;      72 Exported global variables (to be accessed by other files)
                                 ;      73 ******************************************************************************/
                                 ;      74 /* Declares transmit and receive buffers.  The receive buffer
                                 ;      75    is for commuincations to the host as well as when reading
                                 ;      76    the external memory.  This is done to save space. */
                                 ;      77 uint8_t g_fl_tx_buffer[5]; 
                                 ;      78 uint8_t g_fl_rx_buffer[FL_CFG_DATA_BLOCK_MAX_BYTES];
                                 ;      79 
                                 ;      80 /* Data structure to hold load image headers */
                                 ;      81 fl_image_header_t   g_fl_load_image_headers[FL_CFG_MEM_NUM_LOAD_IMAGES];
                                 ;      82 static const char* gszbootMsg[MAX_ROW] =
                                 ;      83 {
                                 ;      84 		/* "12345678901234567890" */
                                 ;      85 		   "    DETECTADO NOVO  ",
                                 ;      86 		   "       FIRMWARE     ",
                                 ;      87 		   "                    ",
                                 ;      88 		   "                    ",
                                 ;      89 		   " ENTER: CONTINUA    ",
                                 ;      90 		   " ESC  : PULA        ",
                                 ;      91 };
                                 ;      92 
                                 ;      93 static const char* gszCarMsg[17] =
                                 ;      94 {
                                 ;      95 		/* "12345678901234567890" */
                                 ;      96 		   "CARREGANDO\n[                ]\n",
                                 ;      97 		   "CARREGANDO\n[*               ]\n",
                                 ;      98 		   "CARREGANDO\n[**              ]\n",
                                 ;      99 		   "CARREGANDO\n[***             ]\n",
                                 ;     100 		   "CARREGANDO\n[****            ]\n",
                                 ;     101 		   "CARREGANDO\n[*****           ]\n",
                                 ;     102 		   "CARREGANDO\n[******          ]\n",
                                 ;     103 		   "CARREGANDO\n[*******         ]\n",
                                 ;     104 		   "CARREGANDO\n[********        ]\n",
                                 ;     105 		   "CARREGANDO\n[*********       ]\n",
                                 ;     106 		   "CARREGANDO\n[**********      ]\n",
                                 ;     107 		   "CARREGANDO\n[***********     ]\n",
                                 ;     108 		   "CARREGANDO\n[************    ]\n",
                                 ;     109 		   "CARREGANDO\n[*************   ]\n",
                                 ;     110 		   "CARREGANDO\n[**************  ]\n",
                                 ;     111 		   "CARREGANDO\n[*************** ]\n",
                                 ;     112 		   "CARREGANDO\n[****************]\n",
                                 ;     113 };
                                 ;     114 
                                 ;     115 
                                 ;     116 char StrBoot[MAX_COLUMN];
                                 ;     117 
                                 ;     118 /******************************************************************************
                                 ;     119 Private global variables and functions
                                 ;     120 ******************************************************************************/
                                 ;     121 
                                 ;     122 /* Points to info on current application */
                                 ;     123 fl_image_header_t * g_pfl_cur_app_header;
                                 ;     124 uint32_t	address = 0;
                                 ;     125 
                                 ;     126 /******************************************************************************
                                 ;     127 * Function Name: R_FL_DownloaderInit
                                 ;     128 * Description  : Initializes communications for FlashLoader operations
                                 ;     129 * Arguments    : none
                                 ;     130 * Return value : none
                                 ;     131 ******************************************************************************/
                                 ;     132 void R_FL_DownloaderInit(void)
                                 ;     133 {
                                 ;     134     /* Initialize pointer to current app's load image header */
                                 ;     135     g_pfl_cur_app_header = (fl_image_header_t *)__sectop("APPHEADER_1");
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",135
00000000 FBE2rrrrrrrr            		MOV.L #_g_pfl_cur_app_header, R14
00000006 FBF2rrrrrrrr            		MOV.L #TOPOF APPHEADER_1, R15
0000000C E3EF                    		MOV.L R15, [R14]
0000000E                         L34:	; entry.split
                                 ;     136     
                                 ;     137     /* Initialize resources needed for using external memory */
                                 ;     138     fl_mem_init();
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",138
0000000E 05rrrrrr             A  		BSR _fl_mem_init
00000012                         L35:	; entry.split1
                                 ;     139 
                                 ;     140     /* Initialize CRC. */
                                 ;     141     R_CRC_Init();
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",141
00000012 05rrrrrr             A  		BSR _R_CRC_Init
00000016 02                      		RTS
00000017                         _R_FL_StateMachine:
                                 		.STACK	_R_FL_StateMachine=588
                                 ;     142     
                                 ;     143 }
                                 ;     144 /******************************************************************************
                                 ;     145 End of function FL_Downloader_Init
                                 ;     146 ******************************************************************************/
                                 ;     147 uint8_t     chargeIndex = 0;
                                 ;     148 
                                 ;     149 /******************************************************************************
                                 ;     150 * Function Name: R_FL_StateMachine
                                 ;     151 * Description  : This is the state machine that runs the FL project. This 
                                 ;     152 *                function should be called on a periodic basis by the user.
                                 ;     153 * Arguments    : none
                                 ;     154 * Return value : none
                                 ;     155 ******************************************************************************/
                                 ;     156 void R_FL_StateMachine(void)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",156
00000017 7200CCFD                		ADD #0FFFFFDCCH, R0
                                 ;     157 {
                                 ;     158     FIL         file;
                                 ;     159     FRESULT     res;
                                 ;     160     uint16_t    file_rw_cnt;
                                 ;     161 	uint8_t     uiMsgRow = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",161
0000001B FA042F0200              		MOV.B #00H, 022FH[R0]
00000020                         L37:	; entry.split
                                 ;     162 
                                 ;     163 	uint32_t    keyEntry = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",163
00000020 F9068C00                		MOV.L #00000000H, 0230H[R0]
00000024                         L38:	; entry.split1
                                 ;     164 
                                 ;     165 
                                 ;     166     R_FL_DownloaderInit();
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",166
00000024 39rrrr               W  		BSR _R_FL_DownloaderInit
00000027                         L39:	; entry.split2
                                 ;     167 
                                 ;     168 	/* Open a text file */
                                 ;     169 	if(drivemountFlag){
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",169
00000027 FBE2rrrrrrrr            		MOV.L #_drivemountFlag, R14
0000002D 58EE                    		MOVU.B [R14], R14
0000002F 610E                    		CMP #00H, R14
00000031 3Arrrr               W  		BEQ L83
00000034                         L40:	; bb6
00000034 6633                    		MOV.L #00000003H, R3
                                 ;     170 		res = f_open(&file, proj_name, FA_READ | FA_WRITE);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",170
00000036 FB22rrrrrrrr            		MOV.L #_proj_name, R2
0000003C 710104                  		ADD #04H, R0, R1
0000003F 05rrrrrr             A  		BSR _f_open
00000043 E7018A                  		MOV.L R1, 0228H[R0]
00000046                         L41:	; bb6.split
                                 ;     171 		if(FR_OK != res)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",171
00000046 ED018A                  		MOV.L 0228H[R0], R1
00000049 6101                    		CMP #00H, R1
0000004B 10                   S  		BEQ L43
0000004C                         L42:	; bb8
                                 ;     172 		{
                                 ;     173 			nop();
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",173
0000004C 03                      		NOP
0000004D 678D                    		RTSD #0234H
0000004F                         L43:	; bb9
                                 ;     174 		}
                                 ;     175 		else
                                 ;     176 		{
                                 ;     177 			res = f_lseek(&file,CRC_ADDRESS);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",177
0000004F FB22rrrrrrrr            		MOV.L #TOPOF APPHEADER_1, R2
00000055 7322000010              		ADD #00100000H, R2
0000005A 710104                  		ADD #04H, R0, R1
0000005D 05rrrrrr             A  		BSR _f_lseek
00000061 E7018A                  		MOV.L R1, 0228H[R0]
00000064                         L44:	; bb9.split
00000064 72042C02                		ADD #022CH, R0, R4
00000068 6673                    		MOV.L #00000007H, R3
                                 ;     178 			f_read(&file, g_fl_load_image_headers, sizeof(g_fl_load_image_headers), (UINT *)&file_rw_cnt);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",178
0000006A FB22rrrrrrrr            		MOV.L #_g_fl_load_image_headers, R2
00000070 710104                  		ADD #04H, R0, R1
00000073 05rrrrrr             A  		BSR _f_read
00000077                         L45:	; bb9.split3
                                 ;     179 			sprintf(StrBoot, "   Versão:%d.%d.%d.%03d", g_fl_load_image_headers[0].version_major,
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",179
00000077 FB12rrrrrrrr            		MOV.L #_g_fl_load_image_headers, R1
0000007D B112                    		MOVU.B 04H[R1], R2
0000007F B09B                    		MOVU.B 03H[R1], R3
00000081 B094                    		MOVU.B 02H[R1], R4
00000083 B019                    		MOVU.B 01H[R1], R1
00000085 7100EC                  		ADD #0FFFFFFECH, R0
00000088 A102                    		MOV.L R2, 10H[R0]
0000008A A08B                    		MOV.L R3, 0CH[R0]
0000008C A084                    		MOV.L R4, 08H[R0]
0000008E A009                    		MOV.L R1, 04H[R0]
00000090 FBE2rrrrrrrr            		MOV.L #_L32, R14
00000096 E30E                    		MOV.L R14, [R0]
00000098 FB12rrrrrrrr            		MOV.L #_StrBoot, R1
0000009E 05rrrrrr             A  		BSR _sprintf
000000A2 710014                  		ADD #14H, R0
000000A5                         L46:	; bb9.split4
                                 ;     180 													 g_fl_load_image_headers[0].version_middle,
                                 ;     181 					                                 g_fl_load_image_headers[0].version_minor,
                                 ;     182 					                                 g_fl_load_image_headers[0].version_comp);
                                 ;     183 			gszbootMsg[2] = StrBoot;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",183
000000A5 FB12rrrrrrrr            		MOV.L #__$gszbootMsg, R1
000000AB FB22rrrrrrrr            		MOV.L #_StrBoot, R2
000000B1 A092                    		MOV.L R2, 08H[R1]
000000B3                         L47:	; bb9.split5
                                 ;     184 			/* Write strings */
                                 ;     185 			for(uiMsgRow = 0; uiMsgRow < MAX_ROW; uiMsgRow++)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",185
000000B3 FA042F0200              		MOV.B #00H, 022FH[R0]
000000B8 2Err                 B  		BRA L49
000000BA                         L48:	; bb23
                                 ;     186 			{
                                 ;     187 				ut_lcd_drawStr(uiMsgRow, 0, gszbootMsg[uiMsgRow], false,ITEM_NO_MARKED,u8g_font_6x10);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",187
000000BA 5A012F02                		MOVU.B 022FH[R0], R1
000000BE FBE2rrrrrrrr            		MOV.L #__$gszbootMsg, R14
000000C4 FE61E3                  		MOV.L [R1,R14], R3
000000C7 6080                    		SUB #08H, R0
000000C9 FB22rrrrrrrr            		MOV.L #_u8g_font_6x10, R2
000000CF A00A                    		MOV.L R2, 04H[R0]
000000D1 F80400                  		MOV.B #00H, [R0]
000000D4 6602                    		MOV.L #00000000H, R2
000000D6 EF24                    		MOV.L R2, R4
000000D8 05rrrrrr             A  		BSR _ut_lcd_drawStr
000000DC 6280                    		ADD #08H, R0
000000DE 5A012F02                		MOVU.B 022FH[R0], R1
000000E2 6211                    		ADD #01H, R1
000000E4 CB012F02                		MOV.B R1, 022FH[R0]
000000E8                         L49:	; bb31
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",185
000000E8 5A012F02                		MOVU.B 022FH[R0], R1
000000EC 6161                    		CMP #06H, R1
000000EE 29rr                    		BLT L48
000000F0                         L50:	; bb36
                                 ;     188 			}
                                 ;     189 			/* Output */
                                 ;     190 			ut_lcd_output_str();
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",190
000000F0 05rrrrrr             A  		BSR _ut_lcd_output_str
000000F4 2Err                 B  		BRA L54
000000F6                         L51:	; bb37
000000F6 FBEE308008              		MOV.L #00088030H, R14
                                 ;     191 
                                 ;     192 			while(keyEntry != KEY_ENTER && keyEntry != KEY_ESC){
                                 ;     193 				WDT_FEED
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",193
000000FB F8E400                  		MOV.B #00H, [R14]
000000FE                         L52:	; bb37.split
000000FE FBEE308008              		MOV.L #00088030H, R14
00000103 F8E4FF                  		MOV.B #0FFH, [R14]
00000106                         L53:	; bb37.split6
                                 ;     194 				xQueueReceive( qKeyboard, &keyEntry, portMAX_DELAY );
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",194
00000106 FBE2rrrrrrrr            		MOV.L #_qKeyboard, R14
0000010C ECE1                    		MOV.L [R14], R1
0000010E 6604                    		MOV.L #00000000H, R4
00000110 FB36FF                  		MOV.L #0FFFFFFFFH, R3
00000113 72023002                		ADD #0230H, R0, R2
00000117 05rrrrrr             A  		BSR _xQueueGenericReceive
0000011B                         L54:	; bb41
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",192
0000011B ED018C                  		MOV.L 0230H[R0], R1
0000011E 6141                    		CMP #04H, R1
00000120 20rr                    		BEQ L57
00000122                         L55:	; bb45
00000122 ED018C                  		MOV.L 0230H[R0], R1
00000125 6111                    		CMP #01H, R1
00000127 10                   S  		BEQ L57
00000128                         L56:	; bb49
00000128 F80601                  		MOV.L #00000001H, [R0]
0000012B 08                   S  		BRA L58
0000012C                         L57:	; bb50
0000012C F80600                  		MOV.L #00000000H, [R0]
0000012F                         L58:	; bb51
0000012F EC01                    		MOV.L [R0], R1
00000131 6101                    		CMP #00H, R1
00000133 21rr                    		BNE L51
00000135                         L59:	; bb57
                                 ;     195 			}
                                 ;     196 			if(keyEntry == KEY_ESC){
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",196
00000135 ED018C                  		MOV.L 0230H[R0], R1
00000138 6111                    		CMP #01H, R1
0000013A 3Arrrr               W  		BEQ L83
0000013D                         L60:	; bb64
0000013D 6602                    		MOV.L #00000000H, R2
0000013F 710104                  		ADD #04H, R0, R1
                                 ;     197 				return;
                                 ;     198 			}
                                 ;     199 
                                 ;     200             res = f_lseek(&file,0);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",200
00000142 05rrrrrr             A  		BSR _f_lseek
00000146 E7018A                  		MOV.L R1, 0228H[R0]
00000149                         L61:	; bb64.split
00000149 6622                    		MOV.L #00000002H, R2
0000014B 6601                    		MOV.L #00000000H, R1
                                 ;     201 		    fl_mem_erase(0, FL_MEM_ERASE_BLOCK);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",201
0000014D 05rrrrrr             A  		BSR _fl_mem_erase
00000151                         L62:	; bb64.split7
                                 ;     202 		    chargeIndex = 0;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",202
00000151 FBE2rrrrrrrr            		MOV.L #_chargeIndex, R14
00000157 F8E400                  		MOV.B #00H, [R14]
0000015A                         L63:	; bb64.split8
                                 ;     203 			ut_lcd_output_warning(gszCarMsg[chargeIndex]);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",203
0000015A FBE2rrrrrrrr            		MOV.L #_chargeIndex, R14
00000160 58EE                    		MOVU.B [R14], R14
00000162 FBF2rrrrrrrr            		MOV.L #__$gszCarMsg, R15
00000168 FE6EF1                  		MOV.L [R14,R15], R1
0000016B 05rrrrrr             A  		BSR _ut_lcd_output_warning
0000016F 38rrrr               W  		BRA L74
00000172                         L64:	; bb71
00000172 72042C02                		ADD #022CH, R0, R4
00000176 FB3A0001                		MOV.L #00000100H, R3
                                 ;     204 		   while(!f_eof(&file)){
                                 ;     205 				f_read(&file, g_fl_rx_buffer, sizeof(g_fl_rx_buffer), (UINT *)&file_rw_cnt);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",205
0000017A FB22rrrrrrrr            		MOV.L #_g_fl_rx_buffer, R2
00000180 710104                  		ADD #04H, R0, R1
00000183 05rrrrrr             A  		BSR _f_read
00000187                         L65:	; bb71.split
00000187 FB3A0001                		MOV.L #00000100H, R3
0000018B 7542FF                  		MOV.L #000000FFH, R2
                                 ;     206 				if(memcmp(g_fl_rx_buffer, 0xFF, sizeof(g_fl_rx_buffer)) != 0)
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",206
0000018E FB12rrrrrrrr            		MOV.L #_g_fl_rx_buffer, R1
00000194 05rrrrrr             A  		BSR _memcmp
00000198 6101                    		CMP #00H, R1
0000019A 20rr                    		BEQ L67
0000019C                         L66:	; bb75
                                 ;     207 					fl_mem_write(address, g_fl_rx_buffer, sizeof(g_fl_rx_buffer));
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",207
0000019C FBE2rrrrrrrr            		MOV.L #_address, R14
000001A2 ECE1                    		MOV.L [R14], R1
000001A4 FB3A0001                		MOV.L #00000100H, R3
000001A8 FB22rrrrrrrr            		MOV.L #_g_fl_rx_buffer, R2
000001AE 05rrrrrr             A  		BSR _fl_mem_write
000001B2                         L67:	; bb81
                                 ;     208 				address += sizeof(g_fl_rx_buffer);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",208
000001B2 FBE2rrrrrrrr            		MOV.L #_address, R14
000001B8 ECEF                    		MOV.L [R14], R15
000001BA 72FF0001                		ADD #0100H, R15
000001BE E3EF                    		MOV.L R15, [R14]
000001C0                         L68:	; bb81.split
                                 ;     209 				if((address % 0x10000) == 0){
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",209
000001C0 FBE2rrrrrrrr            		MOV.L #_address, R14
000001C6 5CEE                    		MOVU.W [R14], R14
000001C8 610E                    		CMP #00H, R14
000001CA 21rr                    		BNE L72
000001CC                         L69:	; bb85
                                 ;     210 					chargeIndex++;
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",210
000001CC FBE2rrrrrrrr            		MOV.L #_chargeIndex, R14
000001D2 58EF                    		MOVU.B [R14], R15
000001D4 621F                    		ADD #01H, R15
000001D6 C3EF                    		MOV.B R15, [R14]
000001D8                         L70:	; bb85.split
                                 ;     211 					ut_lcd_output_warning(gszCarMsg[chargeIndex]);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",211
000001D8 FBE2rrrrrrrr            		MOV.L #_chargeIndex, R14
000001DE 58EE                    		MOVU.B [R14], R14
000001E0 FBF2rrrrrrrr            		MOV.L #__$gszCarMsg, R15
000001E6 FE6EF1                  		MOV.L [R14,R15], R1
000001E9 05rrrrrr             A  		BSR _ut_lcd_output_warning
000001ED                         L71:	; bb85.split9
                                 ;     212 				    fl_mem_erase(address, FL_MEM_ERASE_BLOCK);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",212
000001ED FBE2rrrrrrrr            		MOV.L #_address, R14
000001F3 ECE1                    		MOV.L [R14], R1
000001F5 6622                    		MOV.L #00000002H, R2
000001F7 05rrrrrr             A  		BSR _fl_mem_erase
000001FB                         L72:	; bb99
000001FB FBEE308008              		MOV.L #00088030H, R14
                                 ;     213 				}
                                 ;     214 				WDT_FEED
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",214
00000200 F8E400                  		MOV.B #00H, [R14]
00000203                         L73:	; bb99.split
00000203 FBEE308008              		MOV.L #00088030H, R14
00000208 F8E4FF                  		MOV.B #0FFH, [R14]
0000020B                         L74:	; bb100
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",204
0000020B A889                    		MOV.L 0CH[R0], R1
0000020D 06850104                		CMP 10H[R0].L, R1
00000211 18                   S  		BNE L76
00000212                         L75:	; bb107
00000212 F80600                  		MOV.L #00000000H, [R0]
00000215 08                   S  		BRA L77
00000216                         L76:	; bb108
00000216 F80601                  		MOV.L #00000001H, [R0]
00000219                         L77:	; bb109
00000219 EC01                    		MOV.L [R0], R1
0000021B 6101                    		CMP #00H, R1
0000021D 3Brrrr               W  		BNE L64
00000220                         L78:	; bb113
00000220 710104                  		ADD #04H, R0, R1
                                 ;     215 		   }
                                 ;     216 			res = f_close(&file);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",216
00000223 05rrrrrr             A  		BSR _f_close
00000227 E7018A                  		MOV.L R1, 0228H[R0]
0000022A                         L79:	; bb113.split
0000022A 6623                    		MOV.L #00000002H, R3
                                 ;     217 			res = f_open(&file, proj_name, FA_WRITE);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",217
0000022C FB22rrrrrrrr            		MOV.L #_proj_name, R2
00000232 710104                  		ADD #04H, R0, R1
00000235 05rrrrrr             A  		BSR _f_open
00000239 E7018A                  		MOV.L R1, 0228H[R0]
0000023C                         L80:	; bb113.split10
                                 ;     218 		    f_rename(proj_name, proj_programmed);
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",218
0000023C FB22rrrrrrrr            		MOV.L #_proj_programmed, R2
00000242 FB12rrrrrrrr            		MOV.L #_proj_name, R1
00000248 05rrrrrr             A  		BSR _f_rename
0000024C                         L81:	; bb113.split11
0000024C 6611                    		MOV.L #00000001H, R1
                                 ;     219 		    RESET
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",219
0000024E 05rrrrrr             A  		BSR _R_BSP_RegisterProtectDisable
00000252                         L82:	; bb113.split12
00000252 FBEEC20008              		MOV.L #000800C2H, R14
00000257 F8E901A5                		MOV.W #0A501H, [R14]
0000025B 678D                    		RTSD #0234H
0000025D                         L83:	; return
                                 ;     220 		}
                                 ;     221 	}
                                 ;     222     
                                 ;     223 }
                                 		.LINE  "C:\Workspace\e2studio\git\MT01_master\r_flash_loader_rx\src\r_fl_downloader.c",223
0000025D 678D                    		RTSD #0234H
                                 ;     224 /******************************************************************************
                                 ;     225 End of function R_FL_StateMachine
                                 ;     226 ******************************************************************************/
                                 ;     227 
                                 		.SECTION	C_1,ROMDATA
00000000                         _proj_name:
00000000 4D543031                		.byte	"MT01_proj.bin"
         5F70726F                
         6A2E6269                
         6E                      
0000000D 00                      		.byte	00H
0000000E                         _proj_programmed:
0000000E 4D543031                		.byte	"MT01_done.bin"
         5F646F6E                
         652E6269                
         6E                      
0000001B 00                      		.byte	00H
                                 		.SECTION	L,ROMDATA,ALIGN=4
00000000                         _L10:
00000000 20202020                		.byte	"    DETECTADO NOVO  "
         44455445                
         43544144                
         4F204E4F                
         564F2020                
00000014 00                      		.byte	00H
00000015                         _L11:
00000015 20202020                		.byte	"       FIRMWARE     "
         20202046                
         49524D57                
         41524520                
         20202020                
00000029 00                      		.byte	00H
0000002A                         _L12:
0000002A 20202020                		.byte	"                    "
         20202020                
         20202020                
         20202020                
         20202020                
0000003E 00                      		.byte	00H
0000003F                         _L13:
0000003F 20454E54                		.byte	" ENTER: CONTINUA    "
         45523A20                
         434F4E54                
         494E5541                
         20202020                
00000053 00                      		.byte	00H
00000054                         _L14:
00000054 20455343                		.byte	" ESC  : PULA        "
         20203A20                
         50554C41                
         20202020                
         20202020                
00000068 00                      		.byte	00H
00000069                         _L15:
00000069 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
00000073 0A                      		.byte	0AH
00000074 5B202020                		.byte	"[                ]"
         20202020                
         20202020                
         20202020                
         205D                    
00000086 0A00                    		.byte	0AH,00H
00000088                         _L16:
00000088 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
00000092 0A                      		.byte	0AH
00000093 5B2A2020                		.byte	"[*               ]"
         20202020                
         20202020                
         20202020                
         205D                    
000000A5 0A00                    		.byte	0AH,00H
000000A7                         _L17:
000000A7 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
000000B1 0A                      		.byte	0AH
000000B2 5B2A2A20                		.byte	"[**              ]"
         20202020                
         20202020                
         20202020                
         205D                    
000000C4 0A00                    		.byte	0AH,00H
000000C6                         _L18:
000000C6 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
000000D0 0A                      		.byte	0AH
000000D1 5B2A2A2A                		.byte	"[***             ]"
         20202020                
         20202020                
         20202020                
         205D                    
000000E3 0A00                    		.byte	0AH,00H
000000E5                         _L19:
000000E5 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
000000EF 0A                      		.byte	0AH
000000F0 5B2A2A2A                		.byte	"[****            ]"
         2A202020                
         20202020                
         20202020                
         205D                    
00000102 0A00                    		.byte	0AH,00H
00000104                         _L20:
00000104 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
0000010E 0A                      		.byte	0AH
0000010F 5B2A2A2A                		.byte	"[*****           ]"
         2A2A2020                
         20202020                
         20202020                
         205D                    
00000121 0A00                    		.byte	0AH,00H
00000123                         _L21:
00000123 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
0000012D 0A                      		.byte	0AH
0000012E 5B2A2A2A                		.byte	"[******          ]"
         2A2A2A20                
         20202020                
         20202020                
         205D                    
00000140 0A00                    		.byte	0AH,00H
00000142                         _L22:
00000142 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
0000014C 0A                      		.byte	0AH
0000014D 5B2A2A2A                		.byte	"[*******         ]"
         2A2A2A2A                
         20202020                
         20202020                
         205D                    
0000015F 0A00                    		.byte	0AH,00H
00000161                         _L23:
00000161 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
0000016B 0A                      		.byte	0AH
0000016C 5B2A2A2A                		.byte	"[********        ]"
         2A2A2A2A                
         2A202020                
         20202020                
         205D                    
0000017E 0A00                    		.byte	0AH,00H
00000180                         _L24:
00000180 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
0000018A 0A                      		.byte	0AH
0000018B 5B2A2A2A                		.byte	"[*********       ]"
         2A2A2A2A                
         2A2A2020                
         20202020                
         205D                    
0000019D 0A00                    		.byte	0AH,00H
0000019F                         _L25:
0000019F 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
000001A9 0A                      		.byte	0AH
000001AA 5B2A2A2A                		.byte	"[**********      ]"
         2A2A2A2A                
         2A2A2A20                
         20202020                
         205D                    
000001BC 0A00                    		.byte	0AH,00H
000001BE                         _L26:
000001BE 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
000001C8 0A                      		.byte	0AH
000001C9 5B2A2A2A                		.byte	"[***********     ]"
         2A2A2A2A                
         2A2A2A2A                
         20202020                
         205D                    
000001DB 0A00                    		.byte	0AH,00H
000001DD                         _L27:
000001DD 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
000001E7 0A                      		.byte	0AH
000001E8 5B2A2A2A                		.byte	"[************    ]"
         2A2A2A2A                
         2A2A2A2A                
         2A202020                
         205D                    
000001FA 0A00                    		.byte	0AH,00H
000001FC                         _L28:
000001FC 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
00000206 0A                      		.byte	0AH
00000207 5B2A2A2A                		.byte	"[*************   ]"
         2A2A2A2A                
         2A2A2A2A                
         2A2A2020                
         205D                    
00000219 0A00                    		.byte	0AH,00H
0000021B                         _L29:
0000021B 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
00000225 0A                      		.byte	0AH
00000226 5B2A2A2A                		.byte	"[**************  ]"
         2A2A2A2A                
         2A2A2A2A                
         2A2A2A20                
         205D                    
00000238 0A00                    		.byte	0AH,00H
0000023A                         _L30:
0000023A 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
00000244 0A                      		.byte	0AH
00000245 5B2A2A2A                		.byte	"[*************** ]"
         2A2A2A2A                
         2A2A2A2A                
         2A2A2A2A                
         205D                    
00000257 0A00                    		.byte	0AH,00H
00000259                         _L31:
00000259 43415252                		.byte	"CARREGANDO"
         4547414E                
         444F                    
00000263 0A                      		.byte	0AH
00000264 5B2A2A2A                		.byte	"[****************]"
         2A2A2A2A                
         2A2A2A2A                
         2A2A2A2A                
         2A5D                    
00000276 0A00                    		.byte	0AH,00H
00000278                         _L32:
00000278 20202056                		.byte	"   Vers"
         657273                  
0000027F E3                      		.byte	0E3H
00000280 6F3A2564                		.byte	"o:%d.%d.%d.%03d"
         2E25642E                
         25642E25                
         303364                  
0000028F 00                      		.byte	00H
                                 		.SECTION	D,ROMDATA,ALIGN=4
00000000                         __$gszbootMsg:
00000000 rrrrrrrr                		.lword	_L10
00000004 rrrrrrrr                		.lword	_L11
00000008 rrrrrrrr                		.lword	_L12
0000000C rrrrrrrr                		.lword	_L12
00000010 rrrrrrrr                		.lword	_L13
00000014 rrrrrrrr                		.lword	_L14
00000018                         __$gszCarMsg:
00000018 rrrrrrrr                		.lword	_L15
0000001C rrrrrrrr                		.lword	_L16
00000020 rrrrrrrr                		.lword	_L17
00000024 rrrrrrrr                		.lword	_L18
00000028 rrrrrrrr                		.lword	_L19
0000002C rrrrrrrr                		.lword	_L20
00000030 rrrrrrrr                		.lword	_L21
00000034 rrrrrrrr                		.lword	_L22
00000038 rrrrrrrr                		.lword	_L23
0000003C rrrrrrrr                		.lword	_L24
00000040 rrrrrrrr                		.lword	_L25
00000044 rrrrrrrr                		.lword	_L26
00000048 rrrrrrrr                		.lword	_L27
0000004C rrrrrrrr                		.lword	_L28
00000050 rrrrrrrr                		.lword	_L29
00000054 rrrrrrrr                		.lword	_L30
00000058 rrrrrrrr                		.lword	_L31
0000005C                         _address:
0000005C 00000000                		.lword	00000000H
                                 		.SECTION	D_1,ROMDATA
00000000                         _chargeIndex:
00000000 00                      		.byte	00H
                                 		.SECTION	B,DATA,ALIGN=4
00000000                         _media:
00000000(00000234H)              		.blkl	141
00000234                         _file:
00000234(00000224H)              		.blkl	137
00000458                         _g_app_header:
00000458(00000004H)              		.blkl	1
0000045C                         _g_pfl_cur_app_header:
0000045C(00000004H)              		.blkl	1
                                 		.SECTION	B_1,DATA
00000000                         _g_fl_tx_buffer:
00000000(00000005H)              		.blkb	5
00000005                         _g_fl_rx_buffer:
00000005(00000100H)              		.blkb	256
00000105                         _g_fl_load_image_headers:
00000105(00000007H)              		.blkb	7
0000010C                         _StrBoot:
0000010C(00000014H)              		.blkb	20
                                 		.SECTION	APPHEADER_1,DATA
                                 		.END

Information List

TOTAL ERROR(S)    00000
TOTAL WARNING(S)  00000
TOTAL LINE(S)     00725   LINES

Section List

Attr         Size               Name
CODE     0000000607(0000025FH)  P
DATA     0000000000(00000000H)  APPHEADER_1
ROMDATA  0000000028(0000001CH)  C_1
ROMDATA  0000000656(00000290H)  L
ROMDATA  0000000096(00000060H)  D
ROMDATA  0000000001(00000001H)  D_1
DATA     0000001120(00000460H)  B
DATA     0000000288(00000120H)  B_1

Cpu Type

-ISA=RXV1 -FPU

Command Parameter

-subcommand=C:\Users\LAFONS~1\AppData\Local\Temp\$ccrx124\$ccrx\r_fl_downloader.src.cmd
    -nologo
    -isa=rxv1
    -fpu
    -show=conditionals,definitions,expansions
    -define=__RXV1=1
    -fint_register=0
    -debug
    -endian=little
-listfile=C:\Workspace\e2studio\git\MT01_master\CompactaXP_build\r_fl_downloader.lst
-output=C:\Workspace\e2studio\git\MT01_master\CompactaXP_build\r_flash_loader_rx\src\r_fl_downloader.obj
